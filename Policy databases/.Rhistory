library(tidyverse)
ceres <- read.csv("C:\\Users\\laura\\OneDrive\\Documenti\\LAURA\\MCC\\Policy databases\\ceres_firstversion.csv")
countries <- c("Australia", "Austria", "Belgium","Canada","Denmark", "Finland", "France", "Germany", "Greece", "Ireland", "Italy", "Japan", "Luxembourg", "Netherlands","New Zealand", "Portugal",  "Spain", "Sweden", "Switzerland", "United Kingdom", "United States of America")
ceres %>%
group_by(Country) %>%
ggplot(aes(x = Indicator.database.source)) + geom_bar(stat = "count", fill = "lightblue", alpha = 0.9) + theme_bw() + xlab("Database source") + labs(title = "Share of policies per database source", subtitle = "Filtered by 21 Annex I countries")
fig <- ceres %>%
filter(Country %in% countries) %>%
group_by(Country) %>%
ggplot(aes(x = Country, fill = Indicator.database.source)) + geom_bar(stat = "count", width = 0.8) + theme_bw() + xlab("Countries") + labs(title = "Share of policies per database source by country", subtitle = "Filtered by 21 Annex I countries")
ggsave("Share of policies per database source by country", plot = fig, device = "png", width = 10, height = 8)
ceres %>%
filter(Country %in% countries) %>%
filter(Indicator.database.source %in% c("Climate Policy Database", "EEA")) %>%
ggplot(aes(x = Year..implementation)) + geom_bar(stat = "count", fill = "lightblue") + theme_bw() + labs(title = "Frequency of implementation Years")
ceres %>%
filter(Country %in% countries) %>%
filter(Indicator.database.source %in% c("Climate Policy Database", "EEA")) %>%
ggplot(aes(x = Year..decision)) + geom_bar(stat = "count", fill = "lightblue") + theme_bw() + labs(title = "Frequency of decision years")
ceres %>%
filter(Country %in% countries) %>%
filter(Indicator.database.source %in% c("UNFCCC National Communications", "IEA")) %>%
ggplot(aes(x = Year)) + geom_bar(stat = "count", fill = "lightblue") + theme_bw() + labs(title = "Frequency of Year - UNFCCC + IEA")
View(ceres)
View(fig)
library(tidyverse)
library(countrycode)
library(readr)
iea <- read_csv("policies_database_IEA_commasep.csv")
eea <- read_csv("eea.csv") # to be updated
cpd <- read_csv("cpd.csv")
unfccc <- read_csv("unfccc_final.csv")
eea_prep <- eea %>%
filter(grepl(c("Energy Supply|Other Sectors"), `Sector(s) affected`)) %>%
select(Country, `Name of policy or measure`, Description, `Implementation period start`, `Implementation period finish`, `URL to main reference`) %>%
mutate(country_code = countrycode(Country, origin = "country.name", destination = "iso3c")) %>%
mutate(indicator_database_source = "EEA")
cpd_prep <- cpd %>%
select(Country, `Country ISO`, `Policy Title`, `Policy description`, `Date of decision`, `Start date of implementation`, `End date of implementation`,  `Source or references`) %>%
mutate(indicator_database_source = "Climate Policy Database")
iea_prep <- iea %>%
filter(grepl(c("Power, Heat and Utilities|Power generation|Electricity and heat generation|Combined heat and power"), Sectors)) %>%
select(Country, Year, Policy, Description, URL) %>%
mutate(country_code = countrycode(Country, origin = "country.name", destination = "iso3c")) %>%
mutate(indicator_database_source = "IEA")
# mutate("Country Code" = case_when(Country == "European Union" ~ "Country Code" == "EU")) # not working
unfccc_prep <- unfccc %>%
select(Country, `Country Code`, `Source NC#`, Year, `Policy Name`, `Policy Description`, Link) %>%
mutate(year_implementation = NA) %>%
mutate(year_decision = NA) %>%
mutate(year_end = NA) %>%
mutate(indicator_database_source = "UNFCCC National Communications")
unfccc_cpd <- full_join(unfccc_prep, cpd_prep, by = c("Country", "Country Code" = "Country ISO", "Policy Name" = "Policy Title", "Policy Description" = "Policy description", "year_implementation" = "Start date of implementation", "year_decision" = "Date of decision","year_end" = "End date of implementation",  "Link" = "Source or references", "indicator_database_source" ))
unfccc_cpd_eea <- full_join(unfccc_cpd, eea_prep, by = c("Country", "Country Code" = "country_code", "Policy Name" = "Name of policy or measure", "Policy Description" = "Description", "year_implementation" = "Implementation period start", "year_end" = "Implementation period finish",  "Link" = "URL to main reference", "indicator_database_source"))
unfccc_cpd_eea_iea <- full_join(unfccc_cpd_eea, iea_prep, by = c("Country", "Country Code" = "country_code", "Policy Name" = "Policy", "Policy Description" = "Description", "Year", "Link" = "URL", "indicator_database_source"))
countries <- c("Australia", "Austria", "Belgium", "Canada", "Denmark", "Finland", "France", "Germany", "Greece", "Ireland", "Italy", "Japan", "Luxembourg", "Netherlands", "New Zealand", "Portugal", "Spain", "Sweden", "Switzerland", "United Kingdom", "United States of America")
unfccc_cpd_eea_iea %>%
filter(Country == c(countries))
write.csv(unfccc_cpd_eea_iea,"C:\\Users\\laura\\OneDrive\\Documenti\\LAURA\\MCC\\Policy databases\\ceres_firstversion.csv")
View(unfccc_cpd_eea_iea)
unfccc_cpd_eea_iea %>%
filter(Country == "Japan")
jap <- unfccc_cpd_eea_iea %>%
filter(Country == "Japan")
View(jap)
